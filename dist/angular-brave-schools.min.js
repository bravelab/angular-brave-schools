!function(){"use strict";angular.module("brave.schools",["ui.router"]).value("version","0.0.12")}(),function(){"use strict";angular.module("brave.schools").factory("appConfigMock",[function(){var t={skin:{name:"egradgifts",logo:"themes/egrad/assets/img/logo.png","class":"btn btn-block btn-xs txt-color-white margin-right-5",style:"background-color:#4E653F;",label:"Default egradgifts style"}};return t}])}(),function(){"use strict";function t(t,e){t.state("braveSchools",{url:"/schools",views:{root:{templateUrl:"app/layout/templates/master.tpl.html"},"content@app":{templateUrl:function(){return e.templates.index},controller:"SchoolsController",controllerAs:"vm"}}}),t.state("braveSchools.list",{url:"/all",templateUrl:function(){return e.templates.list},controller:"SchoolsListController",controllerAs:"vm"}),t.state("braveSchools.detail",{url:"/:id/:slug",templateUrl:function(){return e.templates.detail},controller:"SchoolsDetailController",controllerAs:"vm"})}angular.module("brave.schools").config(t),t.$inject=["$stateProvider","BraveSchoolsProvider"]}(),function(){"use strict";function t(t,e,o){function n(){o.get(e.id).then(function(t){console.log(t),r.school=t})}var r=this;r.school=null,n()}angular.module("brave.schools").controller("SchoolsDetailController",t),t.$inject=["$scope","$stateParams","SchoolsService"]}(),function(){"use strict";function t(t){function e(){t.$watch("schools",function(t,e){t!==e&&(o.schools=t)})}var o=this;o.schools=t.schools,e()}angular.module("brave.schools").controller("SchoolsListController",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t,e,o,n,r){function s(){function s(e){l=e.data,i=l,t.schools=l,t.letters=o("firstLetters")(l,"name"),a()}function c(){e.transitionTo("brave.schools")}r.reset(),t.schools=[],t.letter="",t.letters=[],t.columns=[],t.columnCount=3;var a=function(){for(var e=Math.ceil(t.schools.length/t.columnCount),o=0;o<t.schools.length;o+=e){var n={start:o,end:Math.min(o+e,t.schools.length)};t.columns.push(n)}};t.reset=function(){t.setLetter(""),t.search("")},t.setLetter=function(e){t.letter=e,""===e?t.schools=l:(t.schools=o("startsWithLetter")(l,e),i=t.schools)},t.selectSchool=function(t){r.selectSchool(t)},t.search=function(e){""===e&&(i=l,t.schools=l,t.letter&&t.setLetter(t.letter)),t.schools=o("filter")(i,e)},n.getAll().then(s,c)}var l=[],i=[];s()}angular.module("brave.schools").controller("SchoolsController",t),t.$inject=["$scope","$state","$filter","SchoolsService","SchoolsBackend"]}(),function(){"use strict";function t(t){var e=function(e){this.id=e.id,this.subdomain=e.subdomain,this.symbol=e.symbol,this.name=e.name,this.slug=e.slug,this.logoUrl=e.logo_url,this.siteUrl=e.site_url,this.letterBg=angular.isDefined(e.letter_bg)?e.letter_bg:"/themes/egrad/assets/img/letter-bg.jpg",this.skin=new t(e.skin)};return e}angular.module("brave.schools").factory("School",t),t.$inject=["Skin"]}(),function(){"use strict";function t(){var t=function(t){this["class"]=t["class"],this.label=t.label,this.logo=t.logo,this.name=t.name,this.style=t.style};return t}angular.module("brave.schools").factory("Skin",t),t.$inject=[]}(),function(){"use strict";angular.module("brave.schools").filter("firstLetters",[function(){return function(t,e){if("undefined"==typeof t)return t;var o=[];return t.forEach(function(t){var n=t[e].charAt(0);o.indexOf(n)===-1&&o.push(n)}),o}}])}(),function(){"use strict";angular.module("brave.schools").filter("slice",function(){return function(t,e,o){return t.slice(e,o)}})}(),function(){"use strict";angular.module("brave.schools").filter("startsWithLetter",[function(){return function(t,e){if("undefined"==typeof t)return t;for(var o=[],n=new RegExp(e,"i"),r=0;r<t.length;r++){var s=t[r];n.test(s.name.substring(0,1))&&o.push(s)}return o}}])}(),function(){"use strict";angular.module("brave.schools").provider("BraveSchools",function(){this.apiUrl="/api",this.endpoint="/schools",this.templates={index:"templates/schools.html",list:"templates/schools-list.html",detail:"templates/schools-detail.html"},this.$get=function(){var t=this.apiUrl,e=this.templates,o=this.endpoint;return{getApiUrl:function(){return t},getTemplates:function(){return e},getEndpoint:function(){return t+o}}},this.setApiUrl=function(t){this.apiUrl=t},this.setTemplates=function(t){this.templates=t}})}(),function(){"use strict";function t(t,e,o,n,r,s,l,i){function c(e){t.theme={stylesheet:"build/css/prod/"+e+"/main.min.css"},$("head link#skin").attr("href",t.theme.stylesheet)}function a(t){var e=s.defer();return i.getAll().then(function(o){var n=o.data,r=_.find(n,{subdomain:t});r?e.resolve(r):e.reject("config not found")},function(t){e.reject(t)}),e.promise}function u(){delete n.instance,t.instance=l.instance,c(t.instance.slug)}function h(t){n.instance=t,c(t.slug)}function f(t){e(function(){r.location.href="http://"+t.subdomain+"."+l.mainDomain+"/#/loading"})}var m={reset:u,setSchoolConfig:h,selectSchool:f,getSchoolConfig:a};return m}angular.module("brave.schools").factory("SchoolsBackend",t),t.$inject=["$rootScope","$timeout","$state","$localStorage","$window","$q","appConfig","SchoolsService"]}(),function(){"use strict";angular.module("brave.schools").factory("SchoolsServiceMock",["$q","School",function(t,e){var o={id:"8d577746-eef6-4656-968f-921ecec7a9b5",subdomain:"university-of-waterloo.egradgifts.com",symbol:"UOW",name:"University of Waterloo",slug:"university-of-waterloo",logo_url:"https://placeholdit.imgix.net/~text?txtsize=33&txt=university...&w=300&h=200",site_url:"http://www.facebook.com",letter_bg:"/themes/egrad/assets/img/letter-bg.jpg",skin:{"class":"btn btn-block btn-xs txt-color-white margin-right-5",label:"Concordia University College of Alberta",logo:"https://placeholdit.imgix.net/~text?txtsize=33&txt=concordia-...&w=300&h=200",name:"concordia-university-college-of-alberta",style:"background-color:#9E060F;"}},n={detail:new e(o),list:{data:[new e(o)],meta:{totalAmount:1}}};return n}])}(),function(){"use strict";function t(t,e,o,n,r){function s(o){var r=e.defer();return"undefined"!=typeof i[o]?r.resolve(i[o]):t({method:"GET",url:c+"/"+o+"/",transformResponse:n}).then(function(t){i[o]=t.data,r.resolve(i[o])},function(t){r.reject(t)}),r.promise}function l(){var o=e.defer(),n="allSchools";return"undefined"!=typeof i[n]?o.resolve(i[n]):t({method:"GET",cache:!0,url:c,transformResponse:r}).then(function(t){i[n]=t,o.resolve(i[n])},function(t){o.reject(t)}),o.promise}var i={},c=o.getEndpoint(),a={get:s,getAll:l};return a}angular.module("brave.schools").factory("SchoolsService",t),t.$inject=["$http","$q","BraveSchools","SchoolTransformer","SchoolListTransformer"]}(),function(){"use strict";function t(t,e){return function(o){var n="string"==typeof o?angular.fromJson(o):o,r=[];return n.data.length&&(r=_.map(n.data,function(t){return new e(t)}),r=t("orderBy")(r,"name")),r}}angular.module("brave.schools").factory("SchoolListTransformer",t),t.$inject=["$filter","School"]}(),function(){"use strict";function t(t){return function(e){var o="string"==typeof e?angular.fromJson(e):e;return new t(o)}}angular.module("brave.schools").factory("SchoolTransformer",t),t.$inject=["School"]}();